@startuml Model
package Model {
    class MediaFile {
        - name: string
        - path: string
        - type: MediaType
        - metadata: Metadata

        + getName(): string
        + getPath(): string
        + getType(): string
        + getMetadata(): Metadata
        + setMetadata(metadata: Metadata): void
        + setType(type: string): void
    }

    class Playlist {
        - name: string
        - songs: vector<MediaFile>

        + getName(): string
        + getSongs(): vector<MediaFile>
        + addSong(song: MediaFile): void
        + removeSong(song: MediaFile): void
    }

    class MediaLibrary {
        - mediaFiles: vector<MediaFile>

        + getAllMediaFiles(): vector<MediaFile>
        + addMediaFile(file: MediaFile): void
        + removeMediaFile(file: MediaFile): void
        + getMediaFileByName(name: string): MediaFile
        + scanDirectory(path: string): void
        + scanUSBDevice(): void
    }

    class PlaylistLibrary {
        - playlists: vector<Playlist>

        + getAllPlaylists(): vector<Playlist>
        + addPlaylist(playlist: Playlist): void
        + removePlaylist(playlist: Playlist): void
        + getPlaylistByName(name: string): Playlist
    }

    class ModelManager {
        - mediaLibrary: MediaLibrary
        - playlistLibrary: PlaylistLibrary
        - playingMedia: PlayingMedia
        - device: Device

        + getMediaLibrary(): MediaLibrary
        + getPlaylistLibrary(): PlaylistLibrary
        + getPlayingMedia(): PlayingMedia
        + getDevice(): Device
    }

    class PlayingMedia {
        - currentMediaFile: MediaFile*
        - currentTime: int
        - isPlaying: bool

        + getCurrentMediaFile(): MediaFile*
        + setCurrentMediaFile(mediaFile: MediaFile*): void
        + getCurrentTime(): int
        + setCurrentTime(time: int): void
        + getIsPlaying(): bool
        + setIsPlaying(playing: bool): void
        + play(): void
        + pause(): void
        + stop(): void
        + skiptoNext(): void
        + skiptoPrevious(): void
        + skipForward(seconds: int): void
        + skipBackward(seconds: int): void
    }

    class Metadata {
        - data: map<string, string>

        + getMetadata(): map<string, string>
        + setMetadata(data: map<string, string>): void
        + getValue(key: string): string
        + setValue(key: string, value: string): void
    }

    class Device {
        - volume: int
        - KL46ZConnection: KL46ZInterface*
        + setVolume(level: int)
        + getVolume(): int
        + updateDisplay(info: string)
        + handleButtonPress(button: ButtonType)
    }

    enum ButtonType {
        PLAY_PAUSE
        NEXT
        PREVIOUS
        STOP
    }

    Device --> ButtonType : handles >

    enum MediaType {
        AUDIO
        VIDEO
    }

    MediaFile --> "1" MediaType : has type >

    ModelManager --> PlayingMedia
    ModelManager --> MediaLibrary
    ModelManager --> PlaylistLibrary
    ModelManager --> Device
    MediaLibrary o--> MediaFile
    PlaylistLibrary o--> Playlist
    Playlist o--> MediaFile
    MediaFile o--> Metadata
}

package Hardware {
    class KL46ZInterface {
        - serialConnection: SerialPort*
        + connect(): void
        + disconnect(): void
        + readADC(): int
        + readButton(): ButtonState
        + updateDisplay(text: string): void
    }
    Device "1" --> "1" KL46ZInterface : interfaces with >
}

@enduml
